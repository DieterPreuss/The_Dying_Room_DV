pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
x=24 y=24 -- position (in tiles)
dx=0 dy=0 -- velocity
f=0   	-- frame number
d=1   	-- direction (-1, 1)

function _draw()
    cls(1)
    
    -- move camera to current room
    room_x = flr(x/16)
    room_y = flr(y/16)
    camera(room_x*128,room_y*128)
    
    -- draw the whole map (128⁙32)
    map()
    
    -- draw the player
    spr(1+f,  	-- frame index
     x*8-4,y*8-4, -- x,y (pixels)
     1,1,d==-1	-- w,h, flip
    )
end

function _update()
    
    ac=0.1 -- acceleration
    
    if (btn(⬅️)) dx-= ac d=-1
    if (btn(➡️)) dx+= ac d= 1
    if (btn(⬆️)) dy-= ac
    if (btn(⬇️)) dy+= ac
    
    -- move (add velocity)
    x+=dx y+=dy
    
    -- friction (lower for more)
    dx *=.7
    dy *=.7
    
    -- advance animation according
    -- to speed (or reset when
    -- standing almost still)
    spd=sqrt(dx*dx+dy*dy)
    f= (f+spd*2) % 4 -- 4 frames
    if (spd < 0.05) f=0
    
    -- collect apple
    if (mget(x,y)==10) then
   	 mset(x,y,14)
   	 sfx(0)
    end
    
end

__gfx__
000000088000000000000000a0000000000000a00000000000000000000000000000000000000000000000000000000000000044440000000000000000000000
000000988890000000000a0a9a0a0000000a0a9a0a00000000000000000000000000000000000000000000000000555000000444400000000000000000000000
000009998999000000000999b9990000000999b99900000000000000000000000000000000000000000000000055525000004444444000000000000a70000000
000009ff9ff9000000000119b9110000000119b911000000000000000000000000000000000000000000000005662550000445555444000000400049a4000400
00009fffffff900000001111a1111000001111a11110000000000000000000000000000000000000000000005662650000047775555400000449047447404940
000099c7fc799000000011000001100000110000011000000000000000000000000000000000000000000005662665000004780780540000044404b44b404440
0000999cfc9990000000111000111000001110001110000000000000000000000000000000000000000000566266500000047777777400004494404444044444
0090099fff9900900000021101120000000211011200000000000000000000000000000000000000000005662665000000a44676764400005444545aa5454494
0099909444909990000010210120100000002101200000000000000000000000000000000000000000a056626650000007ea476767440000544454ab7a454444
00099f11911f990000021165151112000211651511120000000000000000000000000000000000000aa56626650000009e2a4404444000005494559bba554494
0009999999999900000211525111120002115251111200000000000000000000000000000000000000a9626650000000099aa4004440000054440593ba504444
000f8f99999f8f000001151525151100011515251511000000000000000000000000000000000000000ab665000000000009a7404740000055400559a5500444
000f80199910f80000011011156011000110111560550000000000000000000000000000000000000055a9500000000000007a40077000005540044555500444
000ff0119110ff00000550211120550000002111205500000000000000000000000000000000000005440aaa00000000000004a7744000005540044005400444
000000ff1ff000000000002101200000000011012000000000000000000000000000000000000000554000a00000000000000447744400005550044005400544
000000ff0ff0000000000011011000000000000110000000000000000000000000000000000000005400000000000000000004444a4440000550004404400540
0000000000000000000000a000000000000000a000000000000000000000000000000000000000000005555a0000000000000005500000000000000000000000
0000000000000000000a0a9a0a000000000a0a9a0a00000000000000000000000000000000000000000fff5aa000000000000050755000000000000000000000
00000000000000000009999999000000000999b99900000000000000000000000000000000000000000bfb50aa00000000003330033500000000000000000000
00000000000000000001199911000000000119b91100000000000000000000000000000000000000000ffff00000000000008333333500000000000000000000
0000000000000000001111a111100000001111a111100000000000000000000000000000000000000055ff55f000000000080000335500000000000000000000
000000000000000000111111111000000011000001100000000000000000000000000000000000000f05555ff000000000000000335000000000000000000000
000000000000000000111111111000000011100011100000000000000000000000000000000000001ff556ff1000000000000000035000000000000000000000
0000000000000000000211111200000000021101120000000000000000000000000000000000000011f565511000000000000000035000000000000000000000
00000000000000000010222220100000000021012000000000000000000000000000000000000000011611114444a00000000000350000000000000000000000
0000000000000000021111157112000002116515111200000000000000000000000000000000000000611f4444444a0000000003550000000000000000000000
000000000000000002111152511200000211525111120000000000000000000000000000000000000704444444444aa000000005500000000000000000000000
0000000000000000011555251511000001151525151100000000000000000000000000000000000000040440554440a000000033330000000000000000000000
00000000000000000110755110110000055011156011000000000000000000000000000000000000004404400554400000000555555000050000000000000000
00000000000000000550211120550000055021112000000000000000000000000000000000000000004004000040440000000333333300540000000000000000
00000000000000000000210120000000000021011000000000000000000000000000000000000000004004000040040000055555555550400000000000000000
00000000000000000000110110000000000011000000000000000000000000000000000000000000000004000000040000033333333333000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666664444444466666666666006666666666666666666000000000000000000000000000000000000000000000000000000000000000000000000
55556555555565554599995454444445579999755555655555556555000000000000000000000000000000000000000000000000000000000000000000000000
55556555555565559666666949999994506666055555655555556555000000000000000000000000000000000000000000000000000000000000000000000000
555565555555655504444440f999999f506366055444444444444445000000000000000000000000000000000000000000000000000000000000000000000000
6666666666333366040000400ffffff0606676064999999999999994000000000000000000000000000000000000000000000000000000000000000000000000
55555556536666360481c3400444444050766d064999999999999994000000000000000000000000000000000000000000000000000000000000000000000000
5555555653b66b36045555400400004050d766069ffffffffffffff9000000000000000000000000000000000000000000000000000000000000000000000000
5555555653bbbb360444444004055040500000060444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
0000000063bbbb360400004000000000000000000444444004444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000553333550481c34000000000000000000444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000555335550455554000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000559aa9550444444000000000000000000444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000660440660400004000000000000000000444444004444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000550440560481c34000000000000000000444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000550440560455554000000000000000000500000000000050000000000000000000000000000000000000000000000000000000000000000000000000
00000000555005560400004000000000000000000405555555555040000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000a5a5a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000aabaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000e99b99eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eeeeeeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000ee22ee22eeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000040000ee2f22f22eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000004000000fffffff222e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000004500000f0ff0ff2f2e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000054500000f0ff0fffa2e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000054500000ecfffef2aeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f054500000ff88ff2eeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aaf4440ff0000ff22e11eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00faaaaaa55511111111111eee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aa9ab995f555111111111eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f562655fff551111111eeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005626555fff5111fffeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000056265f555fff1ffffeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000005265fff55ffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000565555ff5fff55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000056500000f555ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000005265000011f11f1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000052650000f11111ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000055265000ff111fffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005626500ffff1ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000562650ffff5ffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000562655fff5ffffff000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000056265fff5fffff550ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050055255ff5fffff5fff5ffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
066505550fff5ffffffffff00f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
8081828080808080808080808080858600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8491928080808080808080808080959600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808087888080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808097988080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8180808080808080808080808080808200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9183808080808080808080808084809200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
