pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--the dying room

function _init()
	p={
	 x=64,
	 y=64,
	 dx=0,
	 dy=0,
	 d="idle",
	 update=playerupdate,
  sprt=2,
  draw=playerdraw,
  sh=2,
  sw=2,
  f=0,
  anims={
	  idle={fr=1,2},
			walkdown={fr=6,2,4,36,2,4,36},
			walkup={fr=6,2,4,36,2,4,36},
			walkleft={fr=6,2,4,36,2,4,36},
			walkright={fr=6,2,4,36,2,4,36},
  }
 }
 add(player)
end

function _draw()
    cls()
    
    -- move camera to current room
--    room_x = flr(x/16)
--    room_y = flr(y/16)
--    camera(room_x*128,room_y*128)
    
    -- draw the whole map (128⁙32)
    map()
    
    direction=p.d
	if(direction=="walkup") then
		 fr=p.anims.walkup[2]
	end
	if(direction=="walkdown") then
		 fr=p.anims.walkdown[2]
	end
	if(direction=="walkleft") then
		 fr=p.anims.walkleft[2]
	end
	if(direction=="walkright") then
		 fr=p.anims.walkright[2]
	end
	-- draw the player
    spr(fr,  	-- frame index
     p.x*8-4,p.y*8-4, -- x,y (pixels)
     2,2--,d==-1	-- w,h, flip
    )
    --[[ draw the player
    spr(1+f,  	-- frame index
     x*8-4,y*8-4, -- x,y (pixels)
     1,1,d==-1	-- w,h, flip
    )]]
end

function _update()
    
    ac=0.1 -- acceleration
    
    if (btn(⬅️)) p.dx-= ac p.d="walkleft"
    if (btn(➡️)) p.dx+= ac p.d="walkright"
    if (btn(⬆️)) p.dy-= ac p.d="walkup"
    if (btn(⬇️)) p.dy+= ac p.d="walkdown"
    
    -- move (add velocity)
    p.x+=p.dx p.y+=p.dy
    
    -- friction (lower for more)
    p.dx *=.7
    p.dy *=.7
    
    -- advance animation according
    -- to speed (or reset when
    -- standing almost still)
    spd=sqrt(p.dx*p.dx+p.dy*p.dy)
    p.f= (p.f+spd*2) % 4 -- 4 frames
    if (spd < 0.05) p.f=0
    
    
end

--[[
function playerupdate(p)

end
]]

__gfx__
00000008800000000000000880000000000000088000000000000008800000000000000000000000000000000000000000000000000000000000000000000000
0000009888a000000000009888900000000000988890000000000009888000000000000000000000000000000000000000000000000000000000000000000000
00000999899a0000000009998999000000000999899900000000009999aa00000000000000000000000000000000000000000000000000000000000000000000
000009ff9ff90000000009ff9ff90000000009ff9ff9000000000999999a80000000000000000000000000000000000000000000000000000000000000000000
00009fffffff900000009fffffff900000009fffffff900000000009999980000000000000000000000000000000000000000000000000000000000000000000
000099c7fc799000000099c7fc799000000099c7fc79900000000999999900000000000000000000000000000000000000000000000000000000000000000000
0000999cfc9990000000999cfc9990000000999cfc99900000000999999900000000000000000000000000000000000000000000000000000000000000000000
00a0099fff9900a000a0099fff9900a000a0099fff9900a0000009999a9900000000000000000000000000000000000000000000000000000000000000000000
009aa09444909a900099909444909a90009aa09444909a9000000994aaa000000000000000000000000000000000000000000000000000000000000000000000
00099f11911f990000099f11911f990000099f11911f99000000090a99a000000000000000000000000000000000000000000000000000000000000000000000
00099999999999000009999999999900000999999999990000000009999000000000000000000000000000000000000000000000000000000000000000000000
000f8f99999f8f00000f8f99999f8f00000f8f99999f8f000000000f899000000000000000000000000000000000000000000000000000000000000000000000
000f80199910f800000ff0199910f800000f80199910ff000000000f8f0000000000000000000000000000000000000000000000000000000000000000000000
000ff0119110ff00000000119110f800000f8011911000000000000ff10000000000000000000000000000000000000000000000000000000000000000000000
000000ff1ff00000000000ff1ff0ff00000ff0ff1ff0000000000001110000000000000000000000000000000000000000000000000000000000000000000000
000000dd0dd00000000000000dd00000000000dd000000000000000ddd0000000000000000000000000000000000000000000000000000000000000000000000
00000000800000000000000080000000000000088000000000000008800000000000000000000000000000000000000000000000000000000000000000000000
0000009888a000000000009888a00000000000098880000000000009888000000000000000000000000000000000000000000000000000000000000000000000
00000999899a000000000999899a00000000009999aa00000000009999aa00000000000000000000000000000000000000000000000000000000000000000000
00000999999a000000000999999a000000000999999a800000000999999a80000000000000000000000000000000000000000000000000000000000000000000
000099999999a0000000999999999000000000099999800000000009999980000000000000000000000000000000000000000000000000000000000000000000
00009999999990000000999999999000000009999999000000000999999900000000000000000000000000000000000000000000000000000000000000000000
00009999999990000000999999999000000009999999000000000999999900000000000000000000000000000000000000000000000000000000000000000000
00a00999999900a000a00999999900a00000099a99990000000009999a9900000000000000000000000000000000000000000000000000000000000000000000
0099909555909a90009990955590aa900000099aaa90000000000994aaa000000000000000000000000000000000000000000000000000000000000000000000
00099959995999000009995999599900000009059aa000000000090a99a000000000000000000000000000000000000000000000000000000000000000000000
000995999995990000099599999599000000000599a0000000000009999000000000000000000000000000000000000000000000000000000000000000000000
000f859999958f00000f859999958f00000000595f8f0000000000ff899000000000000000000000000000000000000000000000000000000000000000000000
0008f01111108f00000ff01111108f000000055995f8f00000000ff89f5000000000000000000000000000000000000000000000000000000000000000000000
000ff0111110ff000000001111108f000000055ff10ff00000000ff9915500000000000000000000000000000000000000000000000000000000000000000000
000000ff9ff00000000000ff9ff0ff000000000111d00000000000011fd500000000000000000000000000000000000000000000000000000000000000000000
000000dd0dd00000000000000dd00000000000550dd00000000000dd0dd000000000000000000000000000000000000000000000000000000000000000000000
00000000a0000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000a0a9a0a0000000a0a9a0a000000000000000000000000000000000000000000000000005550000004444000000000000000000000000000000000000000
00000999b9990000000999b99900000000000000000000000000000000000000000000000055525000004444444000000000000a700000000000000000000000
00000119b9110000000119b911000000000000000000000000000000000000000000000005662550000445555444000000400049a40004000000000000000000
00001111a1111000001111a111100000000000000000000000000000000000000000000056626500000477755554000004490474474049400000000000000000
000011000001100000110000011000000000000000000000000000000000000000000005662665000004780780540000044404b44b4044400000000000000000
00001110001110000011100011100000000000000000000000000000000000000000005662665000000477777774000044944044440444440000000000000000
0000021101120000000211011200000000000000000000000000000000000000000005662665000000a44676764400005444545aa54544940000000000000000
000010210120100000002101200000000000000000000000000000000000000000a056626650000007ea476767440000544454ab7a4544440000000000000000
00021165151112000211651511120000000000000000000000000000000000000aa56626650000009e2a4404444000005494559bba5544940000000000000000
000211525111120002115251111200000000000000000000000000000000000000a9626650000000099aa4004440000054440593ba5044440000000000000000
0001151525151100011515251511000000000000000000000000000000000000000ab665000000000009a7404740000055400559a55004440000000000000000
00011011156011000110111560550000000000000000000000000000000000000055a9500000000000007a400770000055400445555004440000000000000000
000550211120550000002111205500000000000000000000000000000000000005440aaa00000000000004a77440000055400440054004440000000000000000
0000002101200000000011012000000000000000000000000000000000000000554000a000000000000004477444000055500440054005440000000000000000
00000011011000000000000110000000000000000000000000000000000000005400000000000000000004444a44400005500044044005400000000000000000
00000000a0000000000000a000000000000000000000000000000000000000000005555a00000000000000055000000000000000000000000000000000000000
00000a0a9a0a0000000a0a9a0a00000000000000000000000000000000000000000fff5aa0000000000000507550000000000000000000000000000000000000
0000099999990000000999b99900000000000000000000000000000000000000000bfb50aa000000000033300335000000000000000000000000000000000000
0000011999110000000119b91100000000000000000000000000000000000000000ffff000000000000083333335000000000000000000000000000000000000
00001111a1111000001111a111100000000000000000000000000000000000000055ff55f0000000000800003355000000000000000000000000000000000000
00001111111110000011000001100000000000000000000000000000000000000f05555ff0000000000000003350000000000000000000000000000000000000
00001111111110000011100011100000000000000000000000000000000000001ff556ff10000000000000000350000000000000000000000000000000000000
000002111112000000021101120000000000000000000000000000000000000011f5655110000000000000000350000000000000000000000000000000000000
0000102222201000000021012000000000000000000000000000000000000000011611114444a000000000003500000000000000000000000000000000000000
000211111571120000116515111200000000000000000000000000000000000000611f4444444a00000000035500000000000000000000000000000000000000
00021111525112000011525111120000000000000000000000000000000000000704444444444aa0000000055000000000000000000000000000000000000000
000115552515110000151525151100000000000000000000000000000000000000040440554440a0000000333300000000000000000000000000000000000000
00011075511011000050111560110000000000000000000000000000000000000044044005544000000005555550000500000000000000000000000000000000
00055021112055000050211120000000000000000000000000000000000000000040040000404400000003333333005400000000000000000000000000000000
00000021012000000000210110000000000000000000000000000000000000000040040000400400000555555555504000000000000000000000000000000000
00000011011000000000110000000000000000000000000000000000000000000000040000000400000333333333330000000000000000000000000000000000
66666666666666664444444466666666666006666666666666666666000000000000000000000000000000000000000000000000000000000000000000000000
55556555555565554599995454444445579999755555655555556555000000000000000000000000000000000000000000000000000000000000000000000000
55556555555565559666666949999994506666055555655555556555000000000000000000000000000000000000000000000000000000000000000000000000
555565555555655504444440f999999f506366055444444444444445000000000000000000000000000000000000000000000000000000000000000000000000
6666666666333366040000400ffffff0606676064999999999999994000000000000000000000000000000000000000000000000000000000000000000000000
55555556536666360481c3400444444050766d064999999999999994000000000000000000000000000000000000000000000000000000000000000000000000
5555555653b66b36045555400400004050d766069ffffffffffffff9000000000000000000000000000000000000000000000000000000000000000000000000
5555555653bbbb360444444004055040500000060444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
0000000063bbbb360400004000000000000000000444444004444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000553333550481c34000000000000000000444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000555335550455554000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000559aa9550444444000000000000000000444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000660440660400004000000000000000000444444004444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000550440560481c34000000000000000000444444444444440000000000000000000000000000000000000000000000000000000000000000000000000
00000000550440560455554000000000000000000500000000000050000000000000000000000000000000000000000000000000000000000000000000000000
00000000555005560400004000000000000000000405555555555040000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000a5a5a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000aabaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000e99b99eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000eeeeeeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000ee22ee22eeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000040000ee2f22f22eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000004000000fffffff222e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000004500000f0ff0ff2f2e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000054500000f0ff0fffa2e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000054500000ecfffef2aeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f054500000ff88ff2eeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aaf4440ff0000ff22e11eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00faaaaaa55511111111111eee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aa9ab995f555111111111eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000f562655fff551111111eeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005626555fff5111fffeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000056265f555fff1ffffeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000005265fff55ffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000565555ff5fff55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000056500000f555ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000005265000011f11f1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000052650000f11111ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000055265000ff111fffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005626500ffff1ffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000562650ffff5ffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000562655fff5ffffff000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000056265fff5fffff550ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050055255ff5fffff5fff5ffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
066505550fff5ffffffffff00f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
8081828080020102030405060780858600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8491928080101112131415161780959600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080202122232425262780808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080303132333435363780808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8180808080808080808080808080808200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9183808080808080808080808084809200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
